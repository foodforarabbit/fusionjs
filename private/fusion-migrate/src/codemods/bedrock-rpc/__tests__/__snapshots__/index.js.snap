// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`bedrock-rpc positive-match: positive-match 1`] = `
"import RPC from '@uber/bedrock/web-rpc';
import M3 from '@uber/bedrock/universal-m3';
import Logger from '@uber/bedrock/universal-logger';
import WebRpcAtreyu from '@uber/web-rpc-atreyu';
import getAuthParams from '@uber/get-auth-params';
import {rpcIds} from '../shared/rpc-constants';
import atreyuGraphs from './atreyu/graphs';
import atreyuSeeds from './atreyu/seeds';
import atreyuTransforms from './atreyu/transforms';

export default function rpc(server) {
  const webRpcAtreyu = new WebRpcAtreyu(
    server.clients.atreyu,
    server.config.webRpcAtreyu
  );

  const methods = {
    [rpcIds.getUser]: webRpcAtreyu({
      graphDef: atreyuGraphs.user,
      seed: atreyuSeeds.user,
      transform: atreyuTransforms.user,
    }),
  };

  return RPC.init(methods, M3, Logger.createChild('web-rpc'));
}


      ↓ ↓ ↓ ↓ ↓ ↓

import M3 from '@uber/bedrock/universal-m3';
import Logger from '@uber/bedrock/universal-logger';
import WebRpcAtreyu from '@uber/web-rpc-atreyu';
import getAuthParams from '@uber/get-auth-params';
import {rpcIds} from '../shared/rpc-constants';
import atreyuGraphs from './atreyu/graphs';
import atreyuSeeds from './atreyu/seeds';
import atreyuTransforms from './atreyu/transforms';

export default function rpc(server) {
  const webRpcAtreyu = new WebRpcAtreyu(
    server.clients.atreyu,
    server.config.webRpcAtreyu
  );

  const methods = {
    [rpcIds.getUser]: webRpcAtreyu({
      graphDef: atreyuGraphs.user,
      seed: atreyuSeeds.user,
      transform: atreyuTransforms.user,
    }),
  };

  Object.keys(methods).forEach(method => {
    const oldMethod = methods[method];
    methods[method] = (args, ctx) => {
      const req = ctx.req;
      req.body = args;
      return new Promise((resolve, reject) => {
        return oldMethod(req, resolve, reject);
      });
    };
  });
  return methods;
}
"
`;
